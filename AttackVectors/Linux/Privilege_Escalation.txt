Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2021-11-03T15:43:43-05:00

====== Privilege Escalation ======
Created Wednesday 03 November 2021

===== Always revise and test the passwords you already have. =====
* If you're www-data for instance, and you know/feel you can pivot to a user. Try to su to that user with the passwords you already have.

===== Always check for a privesc exploit for the kernel =====
* By exhaustive in your approach. Find them all, and try them all
* Use docker to checkout the target system and to compile the sploit
* ldd --version  gives you the libc version

===== Read the exploits =====
* They contain instructions on how to compile them
* Sometimes they contain instructions to get to root

===== SUDO =====
* When you've got a user shell and a password, just try sudo su!
* Check sudo -l, this will give you a list of command your are allowed to run
* Sudo before 1.8.28 is vulnerable to [[Vulnerabilities:CVE:CVE-2019-14287|CVE-2019-14287]]. You can privesc with this, if the conditions are met:
{{{code: lang="texinfo" linenumbers="False"
sudo -u #-1 <command>
}}}


===== Find credentials in .htpasswd =====
{{{code: lang="texinfo" linenumbers="False"
find / -name ".htpasswd" 2>/dev/null
}}}


===== Look for <user> in all files =====
{{{code: lang="texinfo" linenumbers="False"
cd /  grep -rnw <username> 2>/dev/null
}}}


===== Check mail =====
{{{code: lang="texinfo" linenumbers="False"
ls -la /var/mail
}}}


===== Check if cron is executing script we can control =====

===== Check all services on the system for creds =====
* mysql database
* pop3 servers
* imap servers
* sqlite databases (.sqlite)
* ftp shares (/srv/ftp)



Check [[Technologies:Linux:Kernel Exploits]]
