Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2022-01-25T13:45:02-05:00

====== Compiling a kernel ======
Created Tuesday 25 January 2022

===== Install requirements =====
{{{code: lang="texinfo" linenumbers="False"
sudo apt-get install git fakeroot build-essential ncurses-dev xz-utils libssl-dev bc flex libelf-dev bison
}}}


===== Get source code =====
Goto:
{{{code: lang="texinfo" linenumbers="False"
http://kernel.org
}}}


{{./pasted_image.png?width=750}}
* Grab location

Download with wget
{{{code: lang="texinfo" linenumbers="False"
wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.16.2.tar.xz
}}}



===== Extract xz file =====
{{{code: lang="texinfo" linenumbers="False"
xz -d -v <file.tar.xz>
unxz -v <file.tar.xz>
}}}

* You'll end up with the linux tarball

===== Verify signature =====

==== Download signature ====
{{{code: lang="texinfo" linenumbers="False"
wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.16.2.tar.sign
}}}

* Download signature. Simply replace .xz with .sign in the above download link

==== Verify with gpg ====
{{{code: lang="texinfo" linenumbers="False"
gpg --verify <file.sign>
}}}


If you get the following:
{{./pasted_image003.png}}
* This pubkey is missing

==== Download the keys ====
{{{code: lang="texinfo" linenumbers="False"
gpg --locate-keys torvalds@kernel.org gregkh@kernel.org  
}}}



{{./pasted_image002.png}}


Now try to verify again. Compare the fingerprint with the list above

===== Extraction =====
{{{code: lang="texinfo" linenumbers="False"
tar -xf <file.tar>
}}}


===== Configuration =====
cd into new folder
{{{code: lang="texinfo" linenumbers="False"
make menuconfig
}}}


For a default config, just tab to save and then to exit



===== See =====
https://www.cyberciti.biz/tips/compiling-linux-kernel-26.html
https://git.kernel.org/pub/scm/linux/kernel/git/mricon/korg-helpers.git/tree/get-verified-tarball
