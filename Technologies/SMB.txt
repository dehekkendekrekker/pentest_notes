Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2021-09-15T09:20:04-05:00

====== SMB ======
Created Wednesday 15 September 2021

====== Server Message Block ======

===== Description =====
In computer networking, Server Message Block (SMB), one version of which was also known as Common Internet File System (CIFS) is a communication protocol for providing shared access to files, printers, and serial ports between nodes on a network. It also provides an authenticated inter-process communication (IPC) mechanism. Most usage of SMB involves computers running Microsoft Windows, where it was known as "Microsoft Windows Network" before the introduction of Active Directory. Corresponding Windows services are LAN Manager Server for the server component, and LAN Manager Workstation for the client component.

Old implementations need [[NetBIOS]] to function, newer implementation do not.
However, these new implementations need [[NetBIOS]] over TCP(NBT) to be backwards compatible

===== SMB implementations =====
Or, protocol dialects

==== Common Internet File System (CIFS) ====
* Used to mount shares and perform file sharing

==== Samba ====
* Samba is an open-source implementation of Microsoft Active Directory that allows non-Windows machines to communicate with a Windows network

===== About IPC$ share =====

The IPC$ share is also known as a null session connection. By using this session, Windows lets anonymous users perform certain activities, such as enumerating the names of domain accounts and network shares.

The IPC$ share is created by the Windows Server service. This special share exists to allow for subsequent named pipe connections to the server. The server's named pipes are created by built-in operating system components and by any applications or services that are installed on the system. When the named pipe is being created, the process specifies the security associated with the pipe. Then it makes sure that access is only granted to the specified users or groups.

===== Ports =====
* SMB runs on TCP 445 since windows 2000
* SMB runs on TCP 139 (Netbios) for older verwsion of windows

==== Nmap scripts ====

=== Location ===
{{{code: lang="sh" linenumbers="False"
ls -1 /usr/share/nmap/scripts/smb*
}}}

 

=== Os fingerprinting ===
{{{code: lang="sh" linenumbers="False"
nmap -v -p139, 445 --script=smb-os-discovery <host>
}}}



===== Vulnerabilities =====
[[Vulnerabilities:MS:MS17-010]]

===== SEE =====
[[Tools:Linux:mount]]
[[Portlist]]
[[Enumeration:Windows:SMB]]

