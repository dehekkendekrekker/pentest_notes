Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2021-10-22T08:49:29-05:00

====== Privileges & Integrity Levels ======
Created Friday 22 October 2021

===== Definitions =====

==== Privilege ====
* The permission of an account to perform system-local operations

==== Access Token ====
* A set of information that describes the security context of a user upon authentication.
* An access token is uniquely identified through its security id (SID)

==== Security Identifier(SID) ====
* Uniquely describes a security object, such as token, user or group
* Is generated and maintained by the Windows Local Security Authority
* Consists of a number of the followin format: S-R-I-S
	* Field 1: Literal 'S'
	* Field 2: Revision level, usually set to 1
	* Field 3: Identifier-Authority: (5 for AD)
	* Field 4: One or more subauthority values
* Example: S-1-5-21-2536614405-3629634762-1218571035-1116

==== Integrity mechanism ====
* The integrity mechanism is a core component of the window security architecture
* Assigns different integrity levels to processes and securable objects

==== Integrity level ====
From windows VISTA and onwards, a process can run in 4 integrity levels.
* system integrity process : SYSTEM rights
* high integrity processs: Administrator rights
* medium integrity process : Regular joe right
* low integrity process: often used  in sandboxes

==== User Account Control ====
* Introduced in Vista and Server 2008
* Microsoft does not consider this a security barrier
* Forces programs to run in medium integrity, until permission to run in a higher integrity level is explicitly given.

Has two kinds of prompt:
* credential prompt: Is given when a regular user wants to perform administrative tasks. Credentials of the administrator are asked.
* consent prompt: Is given when an administrator wants to perform an administrative task. He is asked for consent.

* When an administrator is logged in, his account is will have two security tokens. One running at medium integrity level, the other at a high integrity level. The UAC server as a separation between the two.
* So if you have only a terminal, those prompts are really pesky. UAC is a thing that needs to be bypassed

[[Enumeration:Windows]]
[[AttackVectors:Windows:Privilege Escalation:UAC Bypass]]
