Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2021-10-14T17:36:02-05:00

====== MultiPlatform ======
Created Thursday 14 October 2021

===== Description =====
* Powershell & Python 3 post exploitation framework

===== Website =====
https://bc-security.gitbook.io/empire-wiki/

===== Installation =====
{{{code: lang="sh" linenumbers="False"
cd /opt
sudo git clone https://github.com/BC-SECURITY/Empire
cd ./Empire 
git checkout tags/v4.1.3
sudo ./setup/install.sh
}}}


===== Usage =====
Terminal 1
{{{code: lang="sh" linenumbers="False"
cd /opt/Empire
./ps-empire server
}}}


Terminal 2
{{{code: lang="sh" linenumbers="False"
cd /opt/Empire
./ps-empire client
}}}


===== Commands =====
{{{code: lang="texinfo" linenumbers="False"
help														Displays list of commands

listeners													Enters the listeners context
	kill <name>												Kills listener with <name>

	uselistener <listener>										Selects a listener to use (enters listener context)
		info													Displays information about the selected listener
		options													Displays options of listener
		set <param> <value>										Set <param> <value> pair on selected listener
		execute													Runs listener
		back													Returns to listeners context

usestager <stager>											opens stager context
	set <param> <value>										Set <param> <value> pair on selected stager
	execute													Create stager. Result is in /opt/Empire/empire/client/generated-stagers/
	
agents														Opens agents context
	interact <name>											Interacts with agent <name>
		info												Displays info about the system
		help												Displays agent's commands
		view <taskid>										Displays the result of task <taskid>
		ps													Displays process list
		psinject <listener> <pid>							Injects listener process into other process
		
usemodule <module>											Opens module context
}}}



===== Listeners =====
* Listen for and handle connections back to the framework

===== Stagers =====
* Will connect back to the listener, and pull in the rest of the empire agent.

===== How to: =====

==== Basic rev agent ====
* Set up a listener to run on a port, then execute
* The configure a stager to use the listener.
* Then run the stager on the target machine
* When the stager connects back, an agent is created
==== Change process ====
* Set up  agent
* hit ps
* then psinject <listener> <pid>

