Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2021-10-27T17:44:38-05:00

====== smbclient ======
Created Wednesday 27 October 2021

===== Description =====

===== Installation =====
Kali: Installed by default

===== Usage =====
{{{code: lang="sh" linenumbers="False"
smbclient [options] <service>
}}}


===== Options =====
{{{code: lang="texinfo" linenumbers="False"
-L <host>, --list=<host>							Displays a list of shares on <host>
-p <port>, --port=<port>							The port to connect to
-U <user>, --user=<user>							The username to authenticate with
--pw-nt-hash										The supplied password is the NT hash (Pass the hash)
}}}


===== Examples =====
{{{code: lang="sh" linenumbers="False"
smbclient -L 10.11.1.31 -U guest
}}}

* Lists shars on 10.11.1.31 logging in a guest

{{{code: lang="sh" linenumbers="False"
smbclient //10.11.1.31/wwwroot -U guest
}}}

* Open a FTP like connection to the wwwroot share on 10.11.1.31 loggin in as guest

==== While in the FTP like env ====
{{{code: lang="texinfo" linenumbers="False"
smb: \> prompt OFF
smb: \> mask ""
smb: \> recurse ON
smb: \> mget *
}}}

* Downloads all files recursively on the share


===== Errors =====

==== protocol negotiation failed: NT_STATUS_CONNECTION_DISCONNECTED ====
* Fix: add the following two lines to the [global] section in /etc/samba/smb.cfg
{{{code: lang="texinfo" linenumbers="False"
client min protocol = CORE
client max protocol = SMB3
}}}


