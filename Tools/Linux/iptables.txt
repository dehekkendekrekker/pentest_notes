Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2020-02-17T23:15:34-05:00

====== iptables ======
Created Monday 17 February 2020

https://www.digitalocean.com/community/tutorials/iptables-essentials-common-firewall-rules-and-commands

=== Flags ===
{{{code: lang="texinfo" linenumbers="False"
-A <CHAIN>        	Appends rule to the end of the specified chain
-D <NUM|SPEC>     	Deletes rule specified by number or spec
-L [CHAIN]        	Lists al rule. For CHAIN if specified
-Z                	Zeroes the byte counters
-P CHAIN TARGET   	Sets the default policy for CHAIN. TARGET can be ACCEPT or DROP
-v                	Verbose output
-n               	Display IP addresses and ports in numerical format
-X [chain]			Delete the optional user-defined chain specified.  There must be no references to the  chain.
              		If there are, you must delete or replace the referring rules before the chain can be deleted.
              		The chain must be empty, i.e. not contain any rules.  If no argument is given,  it  will  at‚Äê
              		tempt to delete every non-builtin chain in the table

Parameters to above flags
-p 				  	Specify protocol
-s                	Specify source address
-m <module>			Look for match <module> can provide. eg -m conntrack --ctstate ESTABLISHED,RELATED
-j <target>			What to do with the packet? Can be ACCEPT|DROP|RETURN	
-i					Specify interface	
           
}}}



==== Open port (receiving TCP packet) ====
{{{code: lang="sh" linenumbers="False"
iptables -A INPUT -p tcp -m tcp --dport <port> -j ACCEPT 
}}}

* Packets that arrive in the INPUT chain
* Are protocol TCP and match port <port> are accepted

==== Open a UDP port ====
{{{code: lang="sh" linenumbers="False"
sudo iptables -A INPUT -p udp -m udp --dport 69 -j ACCEPT
}}}


==== Open multiple, non contiguous ports ====
{{{code: lang="sh" linenumbers="False"
sudo iptables -A INPUT -p tcp -m multiport --dports 22,80,8080 -j ACCEPT
}}}


==== Open multiple, contiguous ports (inclusive) ====
{{{code: lang="sh" linenumbers="False"
sudo iptables -A INPUT -p tcp --dport 4000:5000
}}}


==== Enable all incoming traffic on an interface ====
{{{code: lang="sh" linenumbers="False"
sudo iptables -A INPUT -i lo -j ACCEPT
}}}



==== Allow established and related traffic ====
{{{code: lang="sh" linenumbers="False"
sudo iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
}}}


