Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2020-03-24T14:14:02-05:00

====== Bash ======
Created Tuesday 24 March 2020

Download static version here:
wget https://github.com/robxu9/bash-static/releases/download/5.0/bash-linux


Iterate through lines in a file:
#!/bin/bash
while IFS= read -r line
do
	*your thing*        
done < <filename>

cut on tab:
cut -d$'\t' -f1


=== Command line args ===
{{{code: lang="sh" linenumbers="False"
-x    Print debug output
-l    Make the shell behave like a login shell (See invocation below)
-i    Run an interactive shell

}}}


=== Assign output of command to variable ===
{{{code: lang="sh" linenumbers="False"
var=$(command)   Preferred
var=`command`    Discouraged
}}}

Command that run like this run in a subshell, so it can't change variables in the parent shell

=== Debug mode (bash -x) ===
{{{code: lang="sh" linenumbers="False"
$ ls
+ ls --color=auto
password_cracking_filtered.pcap
++ echo
}}}

The +'s above specify the level of indirection of subshells.
+ Means same shell
++ Means subshell
+++ means subshell in subshell, etc

=== Special variables ===
{{{code: lang="sh" linenumbers="False"
Variable Name Description
$0        The name of the Bash script
$1 -$9    The first 9 arguments to the Bash script
$#        Number of arguments passed to the Bash script
$@        All arguments passed to the Bash script
$?        The exit status of the most recently run process
$$        The process ID of the current script
$USER     The username of the user running the script
$HOSTNAME The hostname of the machine
$RANDOM   A random number
$LINENO   The current line number in the script
}}}



=== Test operators ===
{{./pasted_image001.png}}


===== Invocation =====

==== For a login shell ====
{{{code: lang="sh" linenumbers="False"
/etc/profile										Always loaded
~/.bash_profile or ~/.bash_login or ~/.profile     	If the former does not exist, the next one is loaded (~/.bashrc and /etc/bashrc are loaded in script by default)
~/.bashrc 										   	Only loaded when ~/.bash_profile exists
~/etc/bashrc							            Only loaded when ~/.bash_profile exists
}}}


==== For a non-login shell ====
{{{code: lang="sh" linenumbers="False"
~/.bashrc
/etc/bashrc
}}}


===== Tricks =====

==== Connecting to a  socket ====
{{{code: lang="sh" linenumbers="False"
exec 8<>/dev/tcp/6.6.6.6/80
}}}

* Opens a filedescriptor 9 and ties it to tcp socket 6.6.6.6:80

{{{code: lang="sh" linenumbers="False"
echo -e “GET / HTTP/1.0\r\n\r\n” >&8
}}}

* Redirects GET request to fd, effectively performing a request on the server

{{{code: lang="sh" linenumbers="False"
cat <&8
}}}

* Read response and display on STDOUT

===== Loop through range =====
{{{code: lang="sh" linenumbers="True"
for i in {1..5}
do
	<foo>
done
}}}


===== Functions =====
{{{code: lang="sh" linenumbers="True"
function_name () {
   echo "Parameter #1 is $1"
}


# Calling
function_name "arg1"
}}}



=== See ===
[[File Transfers]]






